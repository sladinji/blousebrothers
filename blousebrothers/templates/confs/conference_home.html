{% extends "layout.html" %}
{% load static %}
{% load i18n %}
{% load jchart %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.bundle.min.js"></script>
{% endblock %}

{% block content %}
<div class="container">
    <h1 class="text-center">Dossiers</h1>
    <div class="space12"></div> <!-- 40px Vertical Spacing -->
        <div class="row tile_count">
            <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                <span class="count_top"><i class="fa fa-user"></i> Nombre de tests fini</span>
                <div class="count">{{ nb_test_fini }}</div>
            </div>
            <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                <span class="count_top"><i class="fa fa-clock-o"></i> Temps moyen par test</span>
                <div class="count">{{ temps_moyen }}</div>
            </div>
            <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                <span class="count_top"><i class="fa fa-clock-o"></i> Tests ces 7 derniers jours</span>
                <div class="count green">{{ nb_test_this_week }}</div>
                {% if pourcentage_progression < 0 %}
                <span class="count_bottom"><i class="green"><i class="fa fa-sort-desc"></i>{{ pourcentage_progression }}% </i> depuis la semaine d'avant</span>
                {% else %}
                <span class="count_bottom"><i class="green"><i class="fa fa-sort-asc"></i>{{ pourcentage_progression }}% </i> depuis la semaine d'avant</span>
                {% endif %}
                <!--   <span class="count_bottom"><i class="green"><i class="fa fa-sort-asc"></i>34% </i> From last Week</span> -->
            </div>
            <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                <span class="count_top"><i class="fa fa-user"></i> Moyenne des tests</span>
                <div class="count">{{ moy_score}} / 100</div>
            </div>
            <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                <span class="count_top"><i class="fa fa-user"></i> Erreur moyenne sur tes tests</span>
                <div class="count">{{ moy_erreurs }}</div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2">
            </div>
            <div class="col-md-8">
                <div class="col-sm-6 col-md-4 mt-4">
                    <div class="card">
                        <img class="card-img-top" src="{% static 'images/confs/catalogue.png' %}">
                        <div class="card-block">
                            <figure class="profile">
                                <img src="{% static 'images/confs/catalogue.png' %}" alt="">
                            </figure>
                            <h4 class="card-title mt-3">Voir les dossiers disponibles</h4>
                            <div class="meta">
                                <a><span class="fa fa-history"></span></a>
                            </div>
                            <div class="card-text">
                            <small>Tu as effectué {{ request.user.tests|length}} dossiers.</small>
                            </div>
                        </div>
                        <div class="card-footer">
                            <a href="{% url 'catalogue:index' %}" class="btn btn-secondary float-right btn-sm">voir</a>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-4 mt-4">
                    <div class="card">
                        <img class="card-img-top" src="{% static 'images/confs/create.png' %}">
                        <div class="card-block">
                            <figure class="profile">
                                <img src="{% static 'images/confs/create.png' %}" class="profile-avatar" alt="">
                            </figure>
                            <h4 class="card-title mt-3">Créer<br>un dossier</h4>
                            <div class="meta">
                                <a><span class="fa fa-plus"></span></a>
                            </div>
                            <div class="card-text">
                            <small>Tu n'as qu'à te laisser guider...</small>
                            </div>
                        </div>
                        <div class="card-footer">
                            <a href="{% url 'confs:create' %}" class="btn btn-secondary float-right btn-sm">commencer</a>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-4 mt-4">
                    <div class="card">
                        <img class="card-img-top" src="{% static 'images/confs/my_confs.png' %}">
                        <div class="card-block">
                            <figure class="profile">
                                <img src="{% static 'images/confs/my_confs.png' %}" class="profile-avatar" alt="">
                            </figure>
                            <h4 class="card-title mt-3">Voir mes dossiers créés</h4>
                            <div class="meta">
                                <a><span class="fa fa-list"></span></a>
                            </div>
                            <div class="card-text">
                            <small>Tu as créé {{ request.user.created_confs|length }} dossiers.</small>
                            </div>
                        </div>
                        <div class="card-footer">
                            <a href="{% url 'confs:list' %}" class="btn btn-secondary float-right btn-sm">voir</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
            </div>
        </div>
</div>
        <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-5 col-sm-12 col-xs-12">
                {% render_chart mean_chart 'moy_spec' %}
            </div>
            <div class="col-md-5 col-sm-12 col-xs-12">
                {% render_chart monthly_chart '2016' %}
            </div>
            <div class="col-md-1"></div>
        </div>
{% endblock content %}
