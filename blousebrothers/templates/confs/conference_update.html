{% extends "layout.html" %}
{% load static %}{% load i18n %}
{% block title %}{% trans 'Confs' %}{% endblock %}

{% block submenu %}
	<p class="blouse-font">{% trans "Rédaction d'un sujet" %}</p>
{% endblock %}

{% block content %}
<div class="ng-scope" ng-app='djangular-bb'>
<div ng-controller="ConfFormCtrl" class="container" ng-cloak >

    <div class='row'>
	<aside class="col-md-3 col-sm-12">
	    {% verbatim %}
	    <div ng-app="myShoppingList" class="bb-card-2 bb-margin">
	    <header class="bb-container bb-light-grey bb-padding-16">
	    <h3>Questions</h3>
	    <div ng-if="!question">
		    <p>Commencez à ajouter des questions :</p>
	    </div> 
	    </header>
	    <ul class="bb-ul">
		    <li ng-repeat="x in questions" class="bb-padding-16"><a href ng-click="question_selected(x)"><i class="fa fa-{{ valid_q.indexOf(x.pk) !== -1 ? 'check' : 'exclamation-triangle'}}  fa-fw"></i>{{ $index + 1 }} : {{x.question | limitTo: 20}} ...</a></li>
	    </ul>
	    <div class="bb-container bb-light-grey bb-padding-16">
		<div class="row bb-margin-top"></div>
		<p class="bb-padding-left bb-text-red">{{errortext}}</p>
	    </div>
	    </div>
	    {% endverbatim %}
	</aside>

	<div id="subject" class="col-md-9" >
	  {% verbatim %}
	  <legend>Sujet</legend>
	  <form novalidate class="question-form">
	  <input type="text" class="no-border-form form-control" ng-model="conference.title" placeholder="Titre"/><br />
	  <textarea type="text" class="no-border-form form-control" ng-model="conference.statement" placeholder="Énoncé" rows="10"></textarea><br />
	  </form>
	  <a class="btn" ng-click="isImagesDiplayed = !isImagesDiplayed">
		<div ng-if="isImagesDiplayed">
		  Masquer les illustrations
		</div>
		<div ng-if="!isImagesDiplayed">
		  Afficher les illustrations
		</div>
	  </a>
	  <br>
	  <div class="illustrations" ng-show="isImagesDiplayed" id="images_div">
	    <div ng-repeat="image in conferenceimages">
	      <img src="{{ static_media(image.image) }}"/>
	    </div>
	  </div>
		
	  
	  <div ng-if="question">
	    <legend>Question {{ question.index + 1 }} {{ valid_q.indexOf(question.pk) !== -1 ? '' : '(complétez chaque réponse et définissez au moins une réponse juste)'}} </legend>
	    <form novalidate class="question-form">
		    <textarea type="text" class="no-border-form form-control" ng-model="question.question" placeholder="Énoncé"></textarea><br />
	    </form>
	          
	    <form class="form-horizontal">
	    <fieldset>
	    <legend>Réponses</legend>
	    <div class="well well-white" ng-repeat="answer in answers">
	      <span class='well-title'>{{ans_label[answers.indexOf(answer)]}}</span>
	      <div class="form-group">
	        <div class="col-sm-12">
	          	<input ng-model="answer.answer" class="material_form form-control" placeholder="Réponse {{ans_label[answers.indexOf(answer)]}}" required="true" type="text"/>
	             <label><input type="checkbox" ng-model="answer.correct"/> Correcte ?</label>
	        </div>
	      </div>
	      <div class="form-group">
	        <div class="col-sm-12">
	        <input ng-model="answer.explaination" placeholder="Explication" class="material_form form-control input-md" type="text">
	          
	        </div>
	      </div>

	    </div>
	    </fieldset>
	    </form>
	  </div> 
	  <h2>Sujet complété à {{ progress | number : 0 }}%</h2>
	  <div class="progress">
	     <div class="progress-bar" role="progressbar" aria-valuenow="{{ progress }}" aria-valuemin="0" aria-valuemax="100" style="width:{{ progress }}%">
		<span class="sr-only">{{ progress }}% Complete</span>
	    </div>
	  </div>
	  {% endverbatim %}
	</div>
    </div>

</div>
</div>
{% endblock content %}


{% block scripts %}
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.20/angular.min.js" type="text/javascript"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.20/angular-resource.min.js" type="text/javascript"></script>
<script src="{% static 'djng/js/django-angular.min.js' %}" type="text/javascript"></script>
{% include 'partials/confjs.html' %}
{% endblock %}
